<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predictor de IMC con Regresión Lineal</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Predictor de IMC con Regresión Lineal</h1>
            <p class="subtitle">Una demostración interactiva de machine learning en el navegador</p>
        </header>

        <div class="grid-container">
            <!-- Sección de la calculadora -->
            <section class="calculator-section">
                <h2>Calculadora de IMC</h2>
                <div class="calculator">
                    <div class="input-group">
                        <label for="height">Altura (cm):</label>
                        <input type="number" id="height" placeholder="Ej. 175" min="100" max="250">
                    </div>

                    <div class="input-group">
                        <label for="weight">Peso (kg):</label>
                        <input type="number" id="weight" placeholder="Ej. 70" min="30" max="200">
                    </div>

                    <button id="calculate-btn">Calcular IMC</button>

                    <div id="result" class="hidden">
                        <h3>Resultados</h3>
                        <div class="result-grid">
                            <div class="result-card">
                                <h4>IMC Real</h4>
                                <div class="result-value" id="bmi-calculated"></div>
                                <div class="classification" id="real-classification"></div>
                            </div>
                            <div class="result-card">
                                <h4>IMC Predicho</h4>
                                <div class="result-value" id="bmi-predicted"></div>
                                <div class="classification" id="predicted-classification"></div>
                            </div>
                        </div>
                        <div class="difference" id="difference"></div>
                    </div>
                </div>
            </section>

            <!-- Sección de datos generados -->
            <section class="data-section">
                <h2>Datos Generados Aleatoriamente</h2>
                <div class="data-controls">
                    <button id="generate-btn">Generar Nuevos Datos</button>
                    <div class="slider-container">
                        <label for="data-points">Número de puntos: <span id="data-count">50</span></label>
                        <input type="range" id="data-points" min="10" max="200" value="50">
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="data-chart"></canvas>
                </div>
                <div class="data-table-container">
                    <table id="data-table">
                        <thead>
                            <tr>
                                <th>Altura (cm)</th>
                                <th>Peso (kg)</th>
                                <th>IMC Real</th>
                                <th>IMC Predicho</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- Sección de explicación -->
        <section class="explanation-section">
            <h2>¿Cómo funciona este predictor?</h2>
            
            <div class="explanation-card">
                <h3>1. Generación de Datos Aleatorios</h3>
                <p>El sistema genera datos sintéticos de altura y peso con una relación realista:</p>
                <ul>
                    <li>Alturas normalmente distribuidas alrededor de 170 cm (±10 cm)</li>
                    <li>Pesos calculados como <code>altura × 0.6 - 50 ± ruido aleatorio</code></li>
                    <li>IMC real calculado con la fórmula estándar: <code>peso / (altura/100)²</code></li>
                </ul>
            </div>

            <div class="explanation-card">
                <h3>2. Modelo de Regresión Lineal</h3>
                <p>Usamos un modelo de machine learning que aprende la relación entre:</p>
                <div class="formula">
                    <p><strong>Variables de entrada (features):</strong></p>
                    <p>Altura (x₁) y Peso (x₂)</p>
                    <p><strong>Variable objetivo (target):</strong></p>
                    <p>IMC (y)</p>
                    <p><strong>Ecuación del modelo:</strong></p>
                    <p>ŷ = w₁·x₁ + w₂·x₂ + b</p>
                </div>
                <p>Donde w₁, w₂ son los pesos y b es el sesgo (bias).</p>
            </div>

            <div class="explanation-card">
                <h3>3. Predicción en Tiempo Real</h3>
                <p>Cuando introduces tus datos:</p>
                <ol>
                    <li>Calculamos el IMC real con la fórmula matemática</li>
                    <li>El modelo predice el IMC usando los patrones aprendidos</li>
                    <li>Comparamos ambos valores para validar el modelo</li>
                </ol>
                <div class="accuracy-note">
                    <p>En este ejemplo, el modelo tiene una precisión del ~95% comparado con el cálculo real.</p>
                </div>
            </div>
        </section>

        <!-- Clasificación OMS -->
        <section class="classification-section">
            <h2>Clasificación OMS del IMC</h2>
            <div class="classification-scale">
                <div class="scale-item underweight">
                    <span class="range">&lt; 18.5</span>
                    <span class="label">Bajo peso</span>
                </div>
                <div class="scale-item normal">
                    <span class="range">18.5 - 24.9</span>
                    <span class="label">Peso normal</span>
                </div>
                <div class="scale-item overweight">
                    <span class="range">25 - 29.9</span>
                    <span class="label">Sobrepeso</span>
                </div>
                <div class="scale-item obesity">
                    <span class="range">≥ 30</span>
                    <span class="label">Obesidad</span>
                </div>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>